<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <title>Document</title>
</head>
<body>
  <script>
    var stringObject = new String('hello world')  
    console.log(stringObject.length) // 11
    
    // 字符方法
    // 返回给定位置的字符
    var stringValue = 'hello world'
    console.log(stringValue.charAt(1)) // 'e'
    console.log(stringValue[1])
    // 返回给定位置的字符编码
    console.log(stringValue.charCodeAt(1)) // 101
    
    //字符串的操作方法
    // concat 拼接字符串，返回新字符串
    var stringValue1 = 'hello'
    var result = stringValue1.concat(' world', '!')
    console.log(result)
    console.log(stringValue1)
    // slice substr subString
    console.log(stringObject.slice(3))
    console.log(stringObject.substring(3))
    console.log(stringObject.substr(3))

    console.log(stringObject.slice(3, 7))
    console.log(stringObject.substring(3, 7))
    console.log(stringObject.substr(3, 7)) //substr第二个参数是要返回的字符个数
    
    // 字符串的位置方法  indexOf lastIndexOf
    console.log(stringValue.indexOf('o')) // 4
    console.log(stringValue.lastIndexOf('o')) // 7
    // 可接收第二个参数 表示从字符串哪个位置开始搜
    console.log(stringValue.indexOf('o', 6)) //7
    console.log(stringValue.lastIndexOf('o', 6)) //4
    
    // 循环调用indexOf或lastIndexOf找到所有匹配的字符串
    var str = 'asdasdasdasd'
    var positions = []
    var pos = str.indexOf('a')
    while (pos > -1) {
      positions.push(pos)
      pos = str.indexOf('a', pos + 1)
    }
    console.log(positions)

    //trim()方法  删除前置以及后缀的所有空格，然后返回结果
    var stringValue2 = '  hello world  '
    var trimStringValue2 = stringValue2.trim()
    console.log(trimStringValue2)
    console.log(stringValue2)
    
    // 字符串大小写转换方法
    console.log(stringValue.toLocaleUpperCase())
    console.log(stringValue.toUpperCase())
    console.log(stringValue.toLocaleLowerCase())
    console.log(stringValue.toLowerCase())

    //字符串的模式匹配方法
    // match()
    var text = 'cat, bat, sat, fat'
    var pattern = /.at/
    var matches = text.match(pattern)
    console.log(matches.index)
    console.log(matches[0])
    console.log(pattern.lastIndex)
    // search()
    var pos = text.search(/at/)
    console.log(pos)  // 1 即at在字符串第一次出现的位置
    // replace()  
    var result = text.replace('at', 'ond') // 第一个参数的是字符串的情况
    console.log(result)
    result = text.replace(/at/g, 'ond') // 第一个参数是正则的情况
    console.log(result)
    result = text.replace(/(.at)/g, "word:($1)")
    console.log(result)
    // replace第二个参数是函数的情况
    // 实现字符转义
    function htmlEscape (text) {
      return text.replace (/[<>"g]/g, function (match, pos, originalText) {
        switch (match) {
          case "<":
            return "&lt;"
          case ">":
            return "&gt;"
          case "&":
            return "&amp;"
          case "\"":
            return "&quot;"
        }
      })
    }
    console.log(htmlEscape("<p class=\"greeting \">Hello world</p>"))

    //split() 基于指定分隔符将一个字符串分割成多个子字符串的数组
    var colorText = 'red,blue,green,yellow'
    var color1 = colorText.split(',')
    console.log(color1)
    var color2 = colorText.split(',', 2) // 第二个参数指定数组大小
    console.log(color2)
    var color3 = colorText.split(/[^\,]+/)
    console.log(color3)

    // localCompare()比较两个字符串
    var stringValue3 = 'yellow'
    console.log(stringValue3.localeCompare('brick'))
    console.log(stringValue3.localeCompare('yellow'))
    console.log(stringValue3.localeCompare('zoo'))

    // fromCharCode() 接收一或多个字符编码，然后转换成字符串
    console.log(String.fromCharCode(104, 101, 108, 108, 111)) // 'hello'
  </script>
</body>
</html>